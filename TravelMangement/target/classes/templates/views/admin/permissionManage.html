<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout-admin}">
<head>
    <title th:text="#{label.permissionManagement}"></title>
</head>
<body>
<h1 class="mt-4" layout:fragment="page-heading" th:text="#{label.permissionManagement}"></h1>
<ol class="breadcrumb" layout:fragment="breadcrumb">
    <li class="breadcrumb-item"><a th:href="@{/admin}" th:text="#{label.home}"></a></li>
    <li class="breadcrumb-item active" aria-current="page" th:text="#{label.permissionManagement}"></li>
</ol>
<th:block layout:fragment="page-content">
    <div class="card-header py-3">
        <div class="row align-items-center justify-content-between pt-3">
            <div class="col-auto mb-3">
                <div class="page-header-title">
                    <div class="page-header-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round"
                             stroke-linejoin="round"
                             class="feather feather-user">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span th:text="#{label.permissionList}"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card-body">
        <div class="row">

            <div class="col-xl-8 col-lg-7">

                <div class="table-responsive">
                    <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                        <thead>
                        <tr>
                            <th th:text="#{label.id}"></th>
                            <th th:text="'Tên phân quyền'"></th>
                            <th th:text="'Số lượng tài khoản'"></th>
                            <th th:text="'Mô tả quyền'"></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="permission:${permissions}" class="m-0">
                            <td th:text="${permission.id}"></td>
                            <td th:text="${permission.name}"></td>
                            <td th:text="${permission.countAccount}"></td>
                            <td th:text="${permission.description}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>

            </div>

            <!-- Donut Chart -->
            <div class="col-xl-4 col-lg-5">
                <div class="card shadow mb-4">
                    <!-- Card Header - Dropdown -->
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">Donut Chart</h6>
                    </div>
                    <!-- Card Body -->
                    <div class="card-body">
                        <div class="chart-pie pt-4">
                            <div class="chartjs-size-monitor">
                                <div class="chartjs-size-monitor-expand">
                                    <div class=""></div>
                                </div>
                                <div class="chartjs-size-monitor-shrink">
                                    <div class=""></div>
                                </div>
                            </div>
                            <canvas id="permissionChart" width="366" height="316"
                                    style="display: block; height: 253px; width: 293px;"
                                    class="chartjs-render-monitor"></canvas>

                            <script th:inline="javascript">
                                // Set new default font family and font color to mimic Bootstrap's default styling
                                Chart.defaults.global.defaultFontFamily = 'Nunito', '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
                                Chart.defaults.global.defaultFontColor = '#858796';

                                // Pie Chart Example
                                const htmldata = [[${data}]];
                                const ctx = document.getElementById("permissionChart");
                                const myPieChart = new Chart(ctx, {
                                    type: 'doughnut',
                                    data: {
                                        labels: Object.keys(htmldata),
                                        datasets: [{
                                            data: [[1, 3, 5]],
                                            backgroundColor: ['#4e73df', '#1cc88a', '#36b9cc'],
                                            hoverBackgroundColor: ['#2e59d9', '#17a673', '#2c9faf'],
                                            hoverBorderColor: "rgba(234, 236, 244, 1)",
                                        }]
                                    },
                                    options: {
                                        maintainAspectRatio: false,
                                        tooltips: {
                                            backgroundColor: "rgb(255,255,255)",
                                            bodyFontColor: "#858796",
                                            borderColor: '#dddfeb',
                                            borderWidth: 1,
                                            xPadding: 15,
                                            yPadding: 15,
                                            displayColors: false,
                                            caretPadding: 10,
                                        },
                                        legend: {
                                            display: false
                                        },
                                        cutoutPercentage: 80,
                                    },
                                });

                            </script>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</th:block>

</body>

</html>